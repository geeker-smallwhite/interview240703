### 1. 文件\目录管理

- 文件目录信息查看

  - `file` 查看文件类型，类似于 `http` 中的 `application/type` 查看文件什么的类型的文本。

  - `stat` 查看文件/文件夹的详细信息

  	- 比如 `inode`值，创建时间、最后修改时间、权限组、`owner`、创建者、`block` 相关信息。

  		每个文件或者文件夹都有一个唯一的 `inode` 值，无论修改的文件的那种属性，文件的 `inode` 值都不会变，所有在 `linux` 中很多和文件绑定的操作都是用 `inode` 作为唯一 `key` ，比如在文件挂载时。

  		这里存在一个问题，有些编辑器在编辑文件时会有不同的策略，比如写时复制，或者 `backupcopy`，在保存文件时，会删除旧文件，新建一个新的同名文件，这样的话，`inode` 就会发生改变，文件绑定就会出现问题。

  		解决方案：文件绑定时尽量不绑定具体文件，绑定文件夹。

  - `ls` 查看目录下文件信息

  	了解下主要参数的，查看隐藏文件，查看文件大小，相关参数

  	```bash
  	ls -alhtRF
  	```

  - `cd` 切换文件目录

  - `pwd` 查看当前目录

  - 文件链接

  	文件链接分为软链接和硬链接：

  	- 软链接：类似于 `windows` 中的快捷方式，软链接可以跨文件系统，可以对一个不存在的文件或文件目录创建软链接。

  		- 为了更方便地运行某些命令，将其软链接放到 `PATH` 中，这个是通用做法，直接将整个文件目录放到 `PATH` 不利于 `PATH` 的管理。
  		- 在软件包管理中，软链接用处也是非常多，在 `npm` 中，在 `pip` 中。
  		- 克服文件系统的问题，多个文件系统之间无法直接进行操作，可以通过软链接来实现。
  		- 数据目录重定位，平滑更改目录

  		对软链接的操作相当于对其源文件/目录的操作。

  		```bash
  		ln -s /source link  # 对文件创建链接，必须采用绝对目录，不能采用相对目录
  		```

  	- 硬链接：文件副本，不占用实际空间，不能跨文件系统。

  		```bash
  		ln /source link 
  		```

  - 基本操作

  	- `whoami`：查看当前登录用户
  	- `which`：查看执行命令的所在位置
  	- `type`：查看执行命令的类型，`shell` 或者 文件

  - `find`

  	按相关类型查找匹配相关文件，最基本的查看命令，可能存在更高效的查找命令

  	```bash
  	find ./app -name "*.go"
  	```

  - `grep`：

  	 `linux` 中最常用内容匹配命令。

  - `history`：很多 `cli` 客户端都有 `history` 这个机制，保存历史执行的命令，当用户再次执行时，会自动补全，比如 `.mysql_history`、`.bash_history`、`.usql_history`。

  	可以通过参数配置很多相关的内容，比如 `log format` 、保存的条数，保存的位置。

- 文件目录管理

  - `mkdir` 、`cp`、`mv`、`rm`、`rmdir`、`torch`

  - 打包和压缩

  	文件夹的打包和压缩是两个操作，不要将其理解为一个操作。最常见的两个打包压缩命令

  	- `tar`

  		```bash
  		# 可以使用多种压缩算法，支持 gzip.bzip2、xz
  		tar -zcvf test.gzip.tz ./test
  		tar -xtvf test.gzip.tz
  		```

  	- `zip/unzip` 和 `tar` 类似

- 文件内容查看

  - `tail`、`cat`、`head`、`less`、`more`、`nl`、`tac` 以上命令都是查看文件内容的命令。


### 2. 系统管理

- 内存/`cpu` 信息查看
	
	- `free` 查看内存使用信息，一次性的；也可以进行定时定次推送信息。
	- `top` 实时查看不同进程使用 `cpu` 和内存信息。可以查看指定的进程的相关信息。
	- `htop` 是 `top` 的升级版，更直观地查看内存和进程的详细信息。
	
- 进程管理

  在 `linux` 中，万物均为文件，进程也是如此。`Linux` 中进程之间的关系是树状结构，父进程管理管理子进程，一个进程的信息包含该进程的父进程 `id`即`Parent Process ID(PPID)` 和当前进程的`id` 即 `Process ID(PID)`，这是 `linux` 中基本的知识，包含僵尸进程和孤儿进程。

  - `linux` 中 `/proc` 目录保存着系统所有进程的运行信息。具体目录为 `/proc/${pid}/`，比较常用的信息是 `environ`，也就是进程中的环境变量。

- 查看系统信息

	- `/proc` 中也包含其他的系统信息，包含 `/proc/meminfo` 和 `/proc/cpuinfo`，`/proc/version`  也就是 `cpu` 、 `mem`和操作系统的详细信息，
	- `uname` 直接查看系统信息
	- `hostname` 查看主机名

- 网络管理

	- `dns` 解析域名，需要考虑域名服务器，需要考虑 `dns` 劫持的情况，三大运营商经常对墙外知名的网站进行 `dns` 劫持，比如 `github` ，还需要考虑 `/etc/hosts` 文件，最好详细了解 `DNS` 协议的原理。

		- `host`
		- `dig`
		- `nslookup`

	- 查看占用某端口的进程，可以直接 `lsof` 查询，也可以使用 `ss` 进行查询，`ss` 查询更详细，但是使用更复杂。

		```bash
		lsof -i tcp:8000
		```

	- `curl/wget` 发送网络请求，需要考虑调试和使用不同的请求方法。
	
	- `scp`、`rsync`、`ftp` 等等上传下载文件。
	

### 3. 磁盘管理

不只是在 `linux` 中，需要考虑磁盘管理，其他的操作系统也是需要的，常用的 `windows` ，只不过 `windows` 是区分磁盘的，`linux` 是不区分磁盘的。本质上磁盘管理都是相同的。假设将在物理机上添加一块物理磁盘，从文件系统中划出一块儿分区，你需要将磁盘挂载到该分区（目录），然后将目录格式化为合适的文件系统。

- `fdisk` 查看磁盘挂载情况，
- `mount`/`unmount` 挂载/卸载磁盘，机器重启会失效，需要将配置保存到配置文件中，一般是 `/etc/fstab` 文件，这样开机就会生效。

- `df`：查看分区，分区不仅有磁盘分区，还有一些软件的分区，比如`docker` 的分区。

- `du`：查看目录所占用物理磁盘大小，不一定是全目录，因为子目录可能是另外一个磁盘。

- `LVM`：物理磁盘的大小是有限的，假设我需要保存一个非常大的文件/文件夹，几百 `TB` ，找这样一个物理磁盘很难，所以需要 `LVM(Logical Volume Manger)`，将多个物理磁盘集成到一个逻辑磁盘中。

	`LVM` 的逻辑是 一个文件目录`filesystem` 绑定一个逻辑磁盘`LV`，多个逻辑磁盘`LV`绑定一个逻辑磁盘组`VG`，一个磁盘组`VG`绑定绑定多个物理磁盘`PV`。

	`filesystem` ->  `Logical Voumes` -> `Volume Groups` -> `Physical Volumes`。

### 4. 权限管理

在 `Linux` 中，对于任何一个文件（万物皆文件），需要考虑三个方面的权限，所属用户、用户组、其他用户。分别用 `rwx`，`421` 读写跑的权限。

- 用户管理：
	- `useradd`、`userdel`、`usermod`：管理用户，包括用户所属的用户组，用户名，用户使用`shell`、用户目录
	- `passwd`：管理用户密码

- 用户组管路
	- `groupadd`、`groupdel`、`groupmod`：管理用户组，包括用户组名、用户组 中的用户

- 归属权限管理
	- `chmod`：管理文件的权限，所属用户、所属用户组、其他用户的权限。
	- `chown`：更改文件的 `owner` 和 `group`

- `sudo`：使用 `root` 权限执行命令；
- `su`：切换用户。

### 5. 软件管理

- `apt` & `yum`：

	`Linux` 多个发行版本，主要分为两个方向，一个是 `Red Hat` 的版本，`Red Hat`有一个开源的版本 `centos` 已经不维护了，和企业收费版本 `Red Hat Enterprise` 的版本，该发行版采用 `yum` 进行软件包管理。另外一个主流的发行版是 `Debian` ，该版本是开源的，`ubuntu` 是基于此发行版的，该发行版采用 `apt-get` 进行软件包管理，`apt` 是 `apt-get` 的高级版。

	二者功能几乎相同，命令几乎也是相同，但是需要依赖不同的镜像源，需要考虑配置不同的源，其他的操作基本一致。

- 源码：除了通过软件包安装，也可以直接下载源码进行编译安装。

	- 优点：可以下载最新的版本，可以试试调试软件，可以下载的软件更全面。
	- 缺点：编译安装需要依赖其他的第三方库，安装可能失败，需要调试，存在一定门槛。较为麻烦。

- 下载二进制文件：直接下载编译好的安装包

	- 优点：无需编译安装源码即可使用。
	- 缺点：需要靠谱平台，可能存在跨平台不兼容的问题。

### 6. 熟悉`shell`原理

`Linux` 中存在多种 `shell`，比如 `zsh`、`csh`、`ksh`、`bash`等等，其中最常用的 `shell` 是 `bash`，这些 `shell` 大体上是相同的，但是也有一些差异，所以以 `bash` 为准，一般默认运行的 `shell` 是 `/bin/sh` ，该 `sh` 是一个软链接，绑定那个 `shell`，那个 `shell` 就是默认的。

```bash
root@VM-20-12-ubuntu:~# ls -al /bin/sh
lrwxrwxrwx 1 root root 4 Mar 23  2022 /bin/sh -> dash
```

`shell` 配置文件一般保存在用户目录的 `.shrc` 文件中，你可以在其中引用其他配置文件，通过 `source | .` 关键字。

```bash
root@VM-20-12-ubuntu:~# ls ~/.bashrc 
/root/.bashrc
```

该配置也分为全局配置：一般存储在 `/etc/profile` 中，可能会有其他的子模块；也存在用户配置，存储在 `~/.profile` 中。

`shell` 配置中会保存很多属性，`shell` 配置本身就是一个 `shell`，在`shell` 加载后会直接运行该脚本，其中常用的一些关键词。

- `alias` ：设置别名，实现更方便地调用命令。
- `source | .`：导入子配置
- `export`：环境变量，其中又细分很多部分
	- 进程环境变量
	- 作用域环境变量
	- 默认环境变量
		- `$SHELL`：当前使用 `shell`
		- `$PWD`：当前目录
		- `$HOME`：当前登录用户目录
		- `$USER`：当前登录用户
		- `$PATH` ：该环境变量是特殊的，该变量保存一些文件夹和文件，可以让用户直接通过文件名进行访问使用，无需添加路径。
		- `. . . . . .`
